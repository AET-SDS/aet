## Features

AET tests can use a number of useful features which check different elements of the page. You can find more information about them in subpages of this page.

Below you can find a few common cases which demonstrate how to use those features.

##### Compare layout without dynamic content

This is the case where you want to test layout of some page by making a screenshot of page in specified resolution. Your page has some dynamic content e.g. carousel or advertisement and you don't want it to influence the results of your test. The following code snippet shows the test suite for such case:

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<suite name="test-suite" company="company" project="project">
    <test name="first-test" useProxy="rest">
        <collect>
            <open/>
            <hide xpath="//div[@id='mw-panel']" />
            <resolution width="800" height="600" />
            <sleep duration="1500"/>
            <screen/>
        </collect>
        <compare>
            <screen comparator="layout"/>
        </compare>
        <urls>
            <url href="https://en.wikipedia.org/wiki/Main_Page"/>
        </urls>
    </test>
</suite>
```

This test checks the layout of Wikipedia's main page. After opening page the [[Hide Modifier|HideModifier]] is used to hide the navigation bar on the left side of page. Then the [[Resolution Modifier|ResolutionModifier]] is used to set the screenshot resolution to `800x600` and [[Screen Collector|ScreenCollector]] makes a screenshot. Finally [[Layout Comparator|LayoutComparator]] compares page layout with previous test run.

##### Collect status codes from desired range

This is the case when you want to check the status codes of requests generated by page and you are only interested in specific range of codes, e.g. client errors (codes 400-499). The following code snippet shows the test suite for such case:

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<suite name="test-suite" company="company" project="project">
    <test name="first-test" useProxy="rest">
        <collect>
            <open/>
            <status-codes />
        </collect>
        <compare>
            <status-codes filterRange="400,499" />
        </compare>
        <urls>
            <url href="https://en.wikipedia.org/wiki/Main_Pagee"/>
        </urls>
    </test>
</suite>
```

This test uses [[Status Codes Collector|StatusCodesCollector]] to gather status codes for given url (which in this case points to non-existent resource). Then the [[Status Codes Comparator|StatusCodesComparator]] is used to display status codes that fit within range from `400` to `499`.

##### Add cookie to remove cookie consent dialog

This is the case when you want to dismiss a dialog asking for a consent for storing cookies which has to be displayed if the page needs to be compliant with EU legislation. Some pages use cookies to determine if the dialog should be displayed. The following code snippet shows the test suite for such case:

```xml
<suite name="test-suite" company="company" project="project">
    <test name="first-test" useProxy="rest">
        <collect>
            <modify-cookie action="add" cookie-name="eu_cn" cookie-value="1" />
            <open/>
            <sleep duration="1500"/>
            <screen/>
        </collect>
        <compare>
            <screen comparator="layout"/>
        </compare>
        <urls>
            <url href="http://example.com/"/>
        </urls>
    </test>
</suite>
```

This test uses [[Cookie Modifier|CookieModifier]] to add a cookie named `eu_cn` with value `1` which in this example tells that the user already gave consent to store cookies. After that the screenshots is collected and the layout of page is compared with previous test.

##### Collect JavaScript errors and ignore specific ones

This is the case when you want to check if there are any JavaScript errors on the page. You know that, for example, some third party library used has an error but you don't want it to affect your test. The following code snippet shows the test suite for such case:

```xml
<suite name="test-suite" company="company" project="project">
    <test name="first-test" useProxy="rest">
        <collect>
            <open/>
            <js-errors/>
        </collect>
        <compare>
            <js-errors>
                <js-errors-filter error="Uncaught ReferenceError: variable is not defined"/>
            </js-errors>
        </compare>
        <urls>
            <url href="http://example.com/"/>
        </urls>
    </test>
</suite>
```

This test uses [[JS Errors Collector|JSErrorsCollector]] to collect JavaScript errors. Then the [[JS Errors Comparator|JSErrorsComparator]] is used do display the issues. Within comparator the [[JS Errors Data Filter|JSErrorsDataFilter]] ignoring specified error is defined.

##### Compare source ignoring embedded scripts

This is the case, when you want to check source of the page but you want to exclude some code from comparison. It could be, for instance, an embedded analytics script. The following code snippet shows the test suite for such case:

```xml
<suite name="test-suite" company="company" project="project">
    <test name="first-test" useProxy="rest">
        <collect>
            <source />
        </collect>
        <compare>
            <source comparator="source" compareType="allFormatted">
                <remove-nodes xpath="//script" />
            </source>
        </compare>
        <urls>
            <url href="https://en.wikipedia.org/wiki/Main_Page"/>
        </urls>
    </test>
</suite>
```

This test uses [[Source Collector|SourceCollector]] to gather source code. Then [[Source Comparator|SourceComparator]] compares source of the page with previous test. The applied [[Remove Nodes Data Filter|RemoveNodesDataFilter]] removes all `<script>` nodes from source before comparison takes place.
